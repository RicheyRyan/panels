#!/usr/bin/env bash

BIN=node_modules/.bin

NODE_ENV=development $BIN/watchify --debug --verbose \
  --transform [ rollupify --config ./rollup.config.worker.js ] \
  --outfile playground/panels-worker.js ./worker/worker.js & \
NODE_ENV=development $BIN/watchify --debug --verbose \
  --external array-find-index \
  --external houkou \
  --external lite-url \
  --external lodash.debounce \
  --external mini-unique-id \
  --external panels-normalise-uri \
  --external panels-ui \
  --external promise-worker \
  --external react \
  --external react-dom \
  --external react-redux \
  --external redux \
  --external redux-logger \
  --external ./utils/redux-promise:redux-promise \
  --external redux-thunk \
  --external style-to-css \
  --external waiting \
  --transform [rollupify --config rollup.config.js] \
  --transform loose-envify \
  --require ./playground/panels.dev/src.js:panels.dev \
  --outfile playground/panels.dev/app.js & \
NODE_ENV=development $BIN/watchify --debug --verbose \
  --external array-find-index \
  --external houkou \
  --external lite-url \
  --external lodash.debounce \
  --external mini-unique-id \
  --external panels-normalise-uri \
  --external panels-ui \
  --external promise-worker \
  --external react \
  --external react-dom \
  --external react-redux \
  --external redux \
  --external redux-logger \
  --external ./utils/redux-promise:redux-promise \
  --external redux-thunk \
  --external style-to-css \
  --external waiting \
  --transform [rollupify --config rollup.config.js] \
  --transform loose-envify \
  --require ./playground/topbar.panels.dev/src.js:topbar.panels.dev \
  --outfile playground/topbar.panels.dev/app.js & \
NODE_ENV=development $BIN/watchify --debug --verbose \
  --external array-find-index \
  --external houkou \
  --external lite-url \
  --external lodash.debounce \
  --external mini-unique-id \
  --external panels-normalise-uri \
  --external panels-ui \
  --external promise-worker \
  --external react \
  --external react-dom \
  --external react-redux \
  --external redux \
  --external redux-logger \
  --external ./utils/redux-promise:redux-promise \
  --external redux-thunk \
  --external style-to-css \
  --external waiting \
  --transform [rollupify --config rollup.config.js] \
  --transform loose-envify \
  --require ./playground/launchpad.panels.dev/src.js:launchpad.panels.dev \
  --outfile playground/launchpad.panels.dev/app.js & \
NODE_ENV=development $BIN/watchify --debug --verbose \
  --external array-find-index \
  --external houkou \
  --external lite-url \
  --external lodash.debounce \
  --external mini-unique-id \
  --external panels-normalise-uri \
  --external panels-ui \
  --external promise-worker \
  --external react \
  --external react-dom \
  --external react-redux \
  --external redux \
  --external redux-logger \
  --external ./utils/redux-promise:redux-promise \
  --external redux-thunk \
  --external style-to-css \
  --external waiting \
  --transform [rollupify --config rollup.config.js] \
  --transform loose-envify \
  --require ./playground/launchpad-floating.panels.dev/src.js:launchpad-floating.panels.dev \
  --outfile playground/launchpad-floating.panels.dev/app.js & \
NODE_ENV=development $BIN/watchify --debug --verbose \
  --external array-find-index \
  --external houkou \
  --external lite-url \
  --external lodash.debounce \
  --external mini-unique-id \
  --external panels-normalise-uri \
  --external panels-ui \
  --external promise-worker \
  --external react \
  --external react-dom \
  --external react-redux \
  --external redux \
  --external redux-logger \
  --external ./utils/redux-promise:redux-promise \
  --external redux-thunk \
  --external style-to-css \
  --external waiting \
  --transform [rollupify --config rollup.config.js] \
  --transform loose-envify \
  --require ./playground/toc.dev/src.js:toc.dev \
  --outfile playground/toc.dev/app.js & \
NODE_ENV=development $BIN/watchify --debug --verbose \
  --external array-find-index \
  --external houkou \
  --external lite-url \
  --external lodash.debounce \
  --external mini-unique-id \
  --external panels-normalise-uri \
  --external panels-ui \
  --external promise-worker \
  --external react \
  --external react-dom \
  --external react-redux \
  --external redux \
  --external redux-logger \
  --external ./utils/redux-promise:redux-promise \
  --external redux-thunk \
  --external style-to-css \
  --external waiting \
  --transform [rollupify --config rollup.config.js] \
  --transform loose-envify \
  --require ./playground/notes.dev/src.js:notes.dev \
  --outfile playground/notes.dev/app.js & \
NODE_ENV=development $BIN/watchify --debug --verbose \
  --require array-find-index \
  --require houkou \
  --require lite-url \
  --require lodash.debounce \
  --require mini-unique-id \
  --require panels-normalise-uri \
  --require panels-ui \
  --require promise-worker \
  --require react \
  --require react-dom \
  --require react-redux \
  --require redux \
  --require redux-logger \
  --require ./utils/redux-promise:redux-promise \
  --require redux-thunk \
  --require style-to-css \
  --require waiting \
  --transform [rollupify --config rollup.config.js] \
  --transform loose-envify \
  --outfile playground/panels.js index.dev.js & \
  sudo $BIN/babel-node --plugins transform-es2015-modules-commonjs .bin/server.js & \
  wait
