#!/usr/bin/env bash

BIN=node_modules/.bin

NODE_ENV=development $BIN/watchify --debug --verbose --extension .es6 \
  --external browser-vendor-prefix \
  --external can-use-dom \
  --external knock-knock-go \
  --external lite-url \
  --external lodash.debounce \
  --external panels-knock-knock-go \
  --external panels-normalize-uri \
  --external panels-ui \
  --external recompose/withContext \
  --external react \
  --external react-dom \
  --external react-redux \
  --external redux \
  --external redux-logger \
  --external redux-promise \
  --external redux-thunk \
  --external rlookup \
  --external style-to-css \
  --external waiting \
  --transform envify \
  --transform babelify \
  --require ./playground/panels.dev.es6:panels.dev \
  --outfile playground/panels.dev.js & \
NODE_ENV=development $BIN/watchify --debug --verbose --extension .es6 \
  --require browser-vendor-prefix \
  --require can-use-dom \
  --require knock-knock-go \
  --require lite-url \
  --require lodash.debounce \
  --require ./knock-knock-go:panels-knock-knock-go \
  --require ./router/normalize-uri:panels-normalize-uri \
  --require panels-ui \
  --require recompose/withContext \
  --require react \
  --require react-dom \
  --require react-redux \
  --require redux \
  --require redux-logger \
  --require redux-promise \
  --require redux-thunk \
  --require rlookup \
  --require style-to-css \
  --require waiting \
  --transform envify \
  --transform babelify \
  --outfile playground/panels.js index.es6 & \
  sudo $BIN/babel-node ./.bin/server.es6 & \
  wait
